> ### 最好的入门资料
  - http://www.zjmainstay.cn/my-regexp
  - http://www.zjmainstay.cn/regexp-match-times
> ### PHP中的正则函数
  - [参考资料](http://www.cnblogs.com/hellohell/p/5718319.html)
  
  - 由PCRE库提供的函数,以'preg_'为前缀来命名

  - 由POSIX扩展提供的函数,'以ereg_'为前缀来命名
  
> ### 正则表达式的组成

* 在php中一个正则表达式分为三个部分：分隔符、表达式、修饰符

  - 通配符

    - `?`表示匹配一个不确定的字符
    - `*`表示匹配任意多个不确定的字符
    
  - 分隔符
  
    - 可以是除了数字、字母、反斜杠以及空白字符以外的任意字符（比如/、!、#、%、|、~等）
    
  - 表达式
  
    - 由一些特殊字符和非特殊字符串组成,比如`[a-z0-9_--]+@[a-z0-9_.]+`可以匹配一个简单的电子邮件地址
    
  - 修饰符：用于开启和关闭某种功能和模式
  
> ### 测试和验证正则表达式的工具

  - RegexTester
  
  - Firefox插件Regular Expression Tester
  
> ### php中的正则匹配函数

  - [preg_match()](http://php.net/manual/zh/function.preg-match.php) 
 
  `int preg_match ( string $pattern , string $subject [, array &$matches [, int $flags = 0 [, int $offset = 0 ]]] )`  匹配出元素
  $matches[0] 是完整模式, $matches[1] 是匹配第一个元素 。$flags, $offset 是标记值和偏移值
  
- ### 实例
  - `.` 匹配不包括换行的任意字符, 如果需要匹配包括换行的任意字符，可以使用`[\s\S]`代替`.`, `\s`匹配空格、tab、换行, `\S`是`\s`的反义
  - `*` 匹配零个或更多个，即0~n
  - `+` 匹配一个或更多个，即至少一个，1~n
  - `\` 一个特殊字符前加\就表示转义，说明把它当普通字符用
  ```php
    <?php
    $data = '<!doctype html>
        <body>
        <div>
            <ul style="overflow: hidden">
                <li style="width: 100px;height: 100px">这里是li标签</li>
            </ul> 
        </div>
        </body>
        </html>';
    
    /*$data = file_get_contents($html);*/
    $pattern = '#<div>(.*?)</div>#s'; // #i结尾可能是不区分大小写字符串匹配
    $data = preg_match($pattern, $data, $matches);
    var_dump($matches[0]);
    var_dump($matches[1]); // string(136) "<ul style="overflow: hidden"><li style="width: 100px;height: 100px">这里是li标签</li></ul>"
  
  ```
  - `[]` 单字符取一个，比如`[abc]`会匹配a或b或c
  ```php
  <?php
    $str = '123456789';
    /*$data = file_get_contents($html);*/
    //$pattern = "[159]";  匹配159  这里匹配是没有的,所以为空
    $pattern = "(1|5|9)";//匹配1 or 5 or 9  这里匹配是1
    $res = preg_match($pattern, $str, $matches);
    var_dump($matches); 
  ```
  - `/^[\x{4e00}-\x{9fa5}]+$/iu`匹配是否文本都是汉字
  ```php
  <?php
    $str = "php编程";
    if (preg_match("/^[\x{4e00}-\x{9fa5}]+$/iu",$str)) {
    print("该字符串全部是中文");
    } else {
    print("该字符串不全部是中文");
    }
  ```
  - `[\x{4e00}-\x{9fa5}]+/iu`匹配到文本中的汉字
  - `/^[\x{4e00}-\x{9fa5}]{2,4}$/iu`匹配到文本中的都是汉字,并且是2-4个字
  
  - 字符串的开始和结尾
  
    `/^` 和  `/$` 一般配合使用
  
  - `^` 不在字符串首位不代表字符串开始, `^` 在`[^` 的首位时候有特殊意义, 代表取反
  - `{1,3}` 循环次数
  
  
### 慕课网的教程

- 匹配汉字

```php
<?php
//请修改变量p的正则表达式，使他能够匹配苹果
$p = '/苹果/';

$str = "我喜欢吃苹果";
if (preg_match($p, $str)) {
    echo '匹配成功';
}
```

- 匹配英文字符
```php
<?php
/*
  PCRE库函数中，正则匹配模式使用分隔符与元字符组成，分隔符可以是非数字、非反斜线、非空格的任意字符。经常使用的分隔符是正斜线(/)、hash符号(#) 以及取反符号(~) 
  /foo bar/
  #^[^0-9]$#
  ~php~

  如果模式中包含分隔符，则分隔符需要使用反斜杠（\）进行转义。
  /http:\/\//

  分隔符后面可以使用模式修饰符，模式修饰符包括：i, m, s, x等，例如使用i修饰符可以忽略大小写匹配：
  $str = "Http://www.imooc.com/";
  if (preg_match('/http/i', $str)) {
      echo '匹配成功';
  }
*/
//请修改变量p的正则表达式，使他能够匹配BBC
$p = '/BBC/i';
$str = "BBC是英国的一个电视台";
if (preg_match($p, $str)) {
    echo '匹配成功';
}
```

- 元字符和转义
```php
<?php
/*
正则表达式中具有特殊含义的字符称之为元字符，常用的元字符有：

\ 一般用于转义字符
^ 断言目标的开始位置(或在多行模式下是行首)
$ 断言目标的结束位置(或在多行模式下是行尾)
. 匹配除换行符外的任何字符(默认)
[ 开始字符类定义
] 结束字符类定义
| 开始一个可选分支
( 子组的开始标记
) 子组的结束标记
? 作为量词，表示 0 次或 1 次匹配。位于量词后面用于改变量词的贪婪特性。 (查阅量词)
* 量词，0 次或多次匹配
+ 量词，1 次或多次匹配
{ 自定义量词开始标记
} 自定义量词结束标记

下面的\s匹配任意的空白符，包括空格，制表符，换行符。[^\s]代表非空白符。[^\s]+表示一次或多次匹配非空白符。*/
$p = '/^我[^\s]+(苹果|香蕉)$/';
$str = "我喜欢吃苹果";
if (preg_match($p, $str)) {
    echo '匹配成功';
}
/*
元字符具有两种使用场景，一种是可以在任何地方都能使用，另一种是只能在方括号内使用，在方括号内使用的有：

\ 转义字符
^ 仅在作为第一个字符(方括号内)时，表明字符类取反
- 标记字符范围

其中^在反括号外面，表示断言目标的开始位置，但在方括号内部则代表字符类取反，方括号内的减号-可以标记字符范围，例如0-9表示0到9之间的所有数字。

下面的\w匹配字母或数字或下划线。
*/
$p = '/[\w\.\-]+@[a-z0-9\-]+\.(com|cn)/';
$str = "我的邮箱是Spark.eric@imooc.com";
preg_match($p, $str, $match);
echo $match[0];
```

  
   
  


